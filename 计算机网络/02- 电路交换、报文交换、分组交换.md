# 02- 电路交换、报文交换、分组交换
网络的核心部分靠的是路由器在工作，但是它是如何工作的呢？        
工作的主要功能就是交换数据，那交换数据需要确保什么？
- 可靠
- 数据交换效率

## 电路交换
每两个电话（端）之间需要有一天可用的链路，确保两两之间可以通信，这样的话，如果存在n个端，需要n*(n-1)/2

当端够多的时候，可以使用交换机处理：
- 建立连接（呼叫/电路建立）
- 通信（一直占用资源）
- 释放连接（拆除电路）

电路交换是独占资源的，建立连接之后，就会独占这条链路进行数据交换，但不是物理链路上只有这一个连接，因为电路交换会进行多路复用。

![电路交换](https://upload-images.jianshu.io/upload_images/1234352-464477e5c714f759.png)

**缺点：**
1. 计算机数据交换具有突发性
2. 通信一直占用资源效率太低了

## 报文交换
通过一段一段报文直接传输

## 分组交换
> 存储转发
过程：
- 在发生端，将长报文分割成短报文（固定长度的报文段）      
- 在每个数据报文的前面添加首部构成一个分组（每个首部都包含目的地址、源地址，以便不需要一直占用资源的连接也能到达对端）
- 最后发出

上面的过程是一般的端（主机），在发送的过程，但路由器怎么做呢？

- 把收到的分组先缓存起来
- 查找转发表，知道怎么转发，转发的路径
- 转发

优点：
1. 对链路占用是逐段的，动态分配传输宽带
2. 不需要先建立**链路连接**，高效
3. 可靠性由协议保证

![](https://cdn.jsdelivr.net/gh/unluckynike/blogimg/images/三种交换技术比较.png)