# 02-执行环境、作用域、AC、VO对象

## 一、JS代码执行前做了一些事情
- 预编译前奏：确定当前执行上下文，也叫确定执行环境
- 预编译： 声明提前并在内存开辟空间，存储变量和函数

> JS是静态作用域检测，代码一旦写好，作用域就确定了
## 二、简单说下堆栈空间
栈是一种数据结果，先进后出。大家都知道函数是可以嵌套调用执行的，假设一个函数A调用函数B，当函数B执行完，应该要回到函数代码A继续执行，为了知道函数B执行完成之后应该回到哪个位置，那么在执行函数B之前应该先记录断点（汇编的东西）      

当函数B执行完成，代码要回到断点继续执行，那我们应该如果保存断点呢？要知道函数是可以嵌套调用的！

用栈记录断点位置，当最内层的函数执行完毕，栈的最上层保存的位置信息弹出，并转换代码执行的位置（可以看作一个指针，指针指向的代码开始继续执行）

但是不光要记录执行位置，还要记录该函数的变量，当回复到上层函数时要保存当初的环境

**于是出现了环境这个概念，每一个函数调用的时候都应该有一个环境以保存其执行时分配的内存变量，如果函数内部发送函数调用需要先将当前环境保存，确保内部发生函数调用结束后，能够恢复现场**

这个存储环境的过程和断点几乎一致，因此我们可以这么理解：        
假设一段伪代码：
```
函数 A() {
    声明变量 var1
    函数 B()
    声明变量 var2
}

函数 B() {
    声明变量 var3
    函数 C()
    声明变量 var4
}

函数 C() {
    声明变量 var5
}

//执行函数 A
函数A()
```
