# 前端路由

路由在前端比较火的就是 SPA（单页应用），单页应用跳转，页面监听到路径变化进行对应的页面 DOM 的更新，因此给人一直刷新页面的感觉

## SPA

- 优点

  - 不需要重复的加载、解析多页面相同的 资源（通用的，无论是在下载资源还是解析资源上）
  - 减少了大量的请求服务器
  - 用户在多个页面间切换只是局部更新 DOM，在性能保障的情况下用户体验更佳，并且还可以存在页面切换动画

- 缺点：
  - 大部分内容通过 JS 生成，页面源代码链接少、网站主体内容少不便于 SEO
  - 操作不当每次切换页面可能有内存泄漏的问题，一直切换可能造成系统崩溃

## 路由功能实现的核心

- 路由的跳转不会刷新页面（不会重新发起请求，但是能改变地址栏路径）能够保存页面跳转参数携带
- 路由跳转能够被监听，做出相应的逻辑处理

## 浏览器什么时候刷新页面

浏览器的 url 框的路径发生变化也不一定是刷新页面。**真正能刷新页面的只有，改变 url 之后，并且按回车确定才会重新发起请求即刷新页面**，核心点就是浏览器并不是 url 改变就立即挑战，有确认的这一个缓冲期。这可以和 window.location.href 区别开

## 前端路由

- [Hash 路由](./HashRouter.md)
  - hash 发生变化不会重刷，但浏览器存在历史记录
  - window 监听 hashchange 事件
- [History 路由](./HistoryRouter.md)
  - 同源路径 url 发生变化不会重刷，但浏览器存在历史记录
  - window 监听 popState 事件

## 两种路由之间的区别

- 更改 URL 的方式：
  - Hash 通过 location.hash 写入新的 hash 不会触发 浏览器刷新（URL # 后面的内容）
  - History 通过 history.pushState、history.replaceState 修改该域下的路径（必须是同源 URL）
- 历史堆栈

  - History 实现 go、forward、back 方法，不需要自己维护历史堆栈
  - Hash 手动实现 go 等方法但都基于 location.hash 跳转，因此内部的 history 堆栈维护和浏览器的前进后退不一致

- 兼容性、开箱即用
  - Hash 模式无需后端配置，并且兼容性好
  - History 模式在用户手动输入地址或者刷新页面的时候 会发起 URL 请求，后端需要配置 index.html 页面用于匹配不到路径的时候
