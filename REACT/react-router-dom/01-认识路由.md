# 路由
路由的原理：
- 根据url路径的变化，控制对应的组件渲染（其中brower路由时根据window.history的API 控制，hash路由是有window监听hashChange事件触发回调控制）
- 这里的“控制”其实就是匹配路由中注册的路径和url路径进行匹配，至于匹配规则，则被**react-router**封装起来了
- 数据传参，就是通过将对应的路径直接和传过来的数据对象进行映射，比如保存在一个Map对象上，但是刷新页面之后会丢失保存的Map对象，因此我们需要将参数信息在刷新之前保存或者本身就保存了：
  - 通过url保存
    -  采用query对象传递
    - 采用params，但是配合route组件的"path/:id"
  - 跳转页面传入数据时通过cookie，storage等方式进行存储


我们来看看如何做一个简单的路由：
```javascript
import React from 'react'
import { render } from 'react-dom'

const About = React.createClass({/*...*/})
const Inbox = React.createClass({/*...*/})
const Home = React.createClass({/*...*/})

class Router extends React.Component{
  constructor(props) {
    super(props)
    this.state = {
      route: window.location.hash.substr(1)
    }
  },

  componentDidMount() {
    window.addEventListener('hashchange', () => {
      this.setState({
        route: window.location.hash.substr(1)
      })
    })
  },

  render() {
    let Route
    switch (this.state.route) {
      case '/about': Child = About; break;
      case '/inbox': Child = Inbox; break;
      default:      Child = Home;
    }
    //其实可以将整个页面的location、params、history进行封装，最后导入到Route的props
    return (
      <Route location={location} params={params} history={history}>
        {this.props.children}
      </Route>
    )
  }
}

React.render(<Router />, document.body)
```

不知道有没有注意一个细节，就是Router组件将 this.props.children 传递到了 Route 的内部，在之后看到react-router也有这种操作，但可能你一时半会没想明白

## 路由的Hooks的版本
Hooks版本的路由其实用起来更加的顺畅，因为Hooks封装了全部的处理路径url的各种方法，最后通过useRouter等等全部的hooks调用返回你需要的数据或者操作，是得，再也不需要让一个组件通过HOC高阶组件的方式去接受（透传）location、params、history等等对象