# 02-è·¯çº¿åŒ¹é…
```javascript
import {
  BrowserRouter as Router, // æˆ–è€… HashRouter as Router
  Switch,
  Route,
  Link,
} from 'react-router-dom';
```

## Router 
- å¯ä»¥æ˜¯ hashæ¨¡å¼æˆ–è€…historyæ¨¡å¼ï¼Œä½ å¯ä»¥æ ¹æ®ä½ éœ€è¦çš„å…¼å®¹æ€§é€‰æ‹©å¯¹åº”çš„æ¨¡å¼
- ä¸€ä¸ª  Router  å±äºä¸€ä¸ªå•ç‹¬çš„è·¯ç”±æ¨¡å—ï¼Œæ‰€æœ‰çš„åœ¨ç»„ä»¶å†…çš„å…¶å®ƒ react-routerç»„ä»¶ è§¦å‘ï¼Œ
æ‰èƒ½è®© è¯¥Routeræ¨¡å—å“åº”åŠŸèƒ½ï¼Œå› æ­¤èˆ¬å°†Routerå†™åœ¨æœ€å¤–å±‚ï¼Œè¿™æ ·å°±å¯ä»¥éšæ„ç¼–å†™è·¯ç”±ä»£ç ï¼Œè€Œæ²¡æœ‰å¿ƒæ™ºè´Ÿæ‹…



## Route
ç”¨äºè®¾ç½®åŒ¹é…è·¯å¾„**path**å’Œå¯¹åº”çš„ç»„ä»¶**component**ï¼Œæ˜¾ç¤ºå¯¹åº”ç»„ä»¶çš„é€»è¾‘ï¼Œå½“RouteæŒ‡å®šçš„pathå’Œå½“å‰çš„location.pathåŒ¹é…åˆ°æ—¶ï¼Œè‡ªåŠ¨çš„è§¦å‘ç»„ä»¶çš„æ˜¾ç¤ºï¼Œä¸åŒ¹é…æ—¶ï¼Œå¸è½½ç»„ä»¶

ä½†æ˜¯å®ƒæœ‰ä¸€äº›ç‰¹æ€§ï¼š
1. **å…¨åŒ¹é…**ï¼šRouteç»„ä»¶ä»ä¸Šåˆ°ä¸‹åŒ¹é…ï¼Œå¦‚æœåŒ¹é…åˆ°äº†å°±æ¸²æŸ“ï¼Œä¸ç®¡æ˜¯ä¸æ˜¯ç›¸åŒï¼Œæˆ–è€…è·¯å¾„åŒ…å«ã€‚å¦‚æœéœ€è¦é€‰æ‹©åªæ¸²æŸ“ä¸€ä¸ªï¼Œéœ€è¦ä½¿ç”¨Switchç»„ä»¶è¿›è¡ŒåŒ…è£¹ï¼ˆå…¶å®å°±æ˜¯Switchç»„ä»¶å†…éƒ¨è¿›è¡Œswitché€»è¾‘é€šè¿‡props.childrençš„èŠ‚ç‚¹çš„pathè¿‡æ»¤å…¶å®ƒèŠ‚ç‚¹
    ```javascript
    const DeepRouterCom = () = {
      return (
        <Router>
          <Route path="/about" component={About} />
          <Route path="/about" component={About} />
          <Route path="/" component={Index} />
        </Router>
      )
    }
    //è¿™ä¸‰ä¸ªç»„ä»¶ï¼Œå½“urlä¸º"/about"çš„æ—¶å€™åŒæ—¶æ˜¾ç¤º
    ```

2. **éç²¾å‡†åŒ¹é…**ï¼Œæ¯”å¦‚Routeçš„ï¼Œå‡å¦‚path="/"å’Œpath="/about"åŒæ—¶å­˜åœ¨ï¼Œè€Œä¸”"/"çš„routeç»„ä»¶åœ¨"about"ç»„ä»¶ä¹‹å‰ï¼Œé‚£ä¹ˆå½“urlè·¯å¾„å˜åŒ–ä¸º"/about"æ˜¯ï¼Œä¼šå…ˆåŒ¹é…åˆ°path="/"çš„Routeï¼Œå¦‚æœè¿™ä¸ªæ—¶å€™è¿˜è¢«SwitchåŒ…è£¹ï¼Œé‚£ä¹ˆâ€œaboutâ€ç»„ä»¶æ˜¯ä¸ä¼šæ˜¾ç¤ºçš„ï¼Œè§£å†³è¿™ä¸ªé—®é¢˜å¯ä»¥ä½¿ç”¨ exact å¼€å¯ç²¾å‡†åŒ¹é…
    ```javascript
    const DeepRouterCom = () = {
      return (
        <Router>
          <Switch>
            <Route path="/" component={Index} />
            <Route path="/about" component={About} />
            <Route path="/about" component={About} />
          </Switch>
        </Router>
      )
    }
    //è¿™ä¸‰ä¸ªç»„ä»¶ï¼Œå½“urlä¸º"/about"çš„ "about" ç»„ä»¶ä¸ä¼šæ˜¾ç¤ºï¼Œåªèƒ½æ¸²æŸ“å‡ºIndex
    ```

3. **é€ä¼ **ï¼š Routeé€šè¿‡componentå±æ€§ä¼ å…¥çš„ç»„ä»¶ï¼Œä¼šè¢«é€ä¼ historyã€matchã€locationã€staticContextï¼ˆssræ‰æœ‰ï¼‰

4. **renderProps**ï¼šé€ä¼ childrenï¼Œæˆ–è€…ä½¿ç”¨renderå±æ€§ï¼Œä¼ é€’ä¸€ä¸ªå‡½æ•°ï¼Œå‡½æ•°æ‰§è¡Œçš„ç»“æœæ˜¯RouteåŒ¹é…æ¸²æŸ“çš„ç»“æœ
    ```javascript
    const DeepRouterCom = () = {
      return (
        <Route path="/">
          {
            ({history, match, location, staticContext}) => (
              <Home />  {/* ä¸ä¼ é€’è¿›å»ï¼Œè·å–ä¸åˆ°å¯¹åº”çš„è·¯ç”±è®¢é˜… */}
            )
          }
        </Route>      
      )
    }
    ```

5. ä»£ç åˆ†å—ï¼Œæ³¨æ„å­ç»„ä»¶ä½¿ç”¨çš„Routeéœ€è¦ä½¿ç”¨ç»å¯¹è·¯å¾„ï¼Œ[nesting](https://reactrouter.com/web/example/nesting)


## Link
Linkä½œä¸ºå¯¼èˆªçš„æŒ‰é’®å•ä½ï¼Œå®ƒåº”è¯¥å…·æœ‰æ‰€æœ‰ç¼–ç¨‹å¼å¯¼èˆªçš„æ‰€æœ‰åŠŸèƒ½ï¼š
- å»å“ªé‡Œ => to ï¼ˆbaseã€hashã€queryï¼‰
- åˆ°ä»€ä¹ˆå‚æ•° => to.state
- èƒ½ä¸èƒ½ä½¿ç”¨è‡ªå®šä¹‰çš„æ ‡ç­¾ï¼ˆåƒVueçš„labelä¸€æ ·ï¼‰

1. **å¯¼èˆªè¡Œä¸º**ï¼š
    ```javascript
    <Link to="/courses?sort=name" />

    <Link
      to={{
        pathname: "/courses",
        search: "?sort=name",
        hash: "#the-hash",
        state: { fromDashboard: true }
      }}
    />
    <Link to={location => ({ ...location, pathname: "/courses" })} />
    ```

2. **è‡ªå®šä¹‰UI**ï¼š
    ```javascript
    const FancyLink = React.forwardRef((props, ref) => (
      <a ref={ref} {...props}>ğŸ’… {props.children}</a>
    ))

    <Link to="/" component={FancyLink} />

    // æˆ–è€…
    <Link to="/">
      <Component />
    </Link>
    ```

> NavLinkæ˜¯åœ¨LinkåŸºç¡€ä¸Šå°è£…çš„ï¼Œæ ¸å¿ƒåŠŸèƒ½æä¾›å½“è¯¥Linkè¢«targetæ—¶ï¼ŒæŒ‡å®šçš„ç±»åå’Œæ ·å¼ï¼Œç”šè‡³å¯ä»¥è§¦å‘å›è°ƒ

## locationå’Œmatch
- match
  ```javascript
  {
    params: { // path/:id ä¼ è¿‡æ¥çš„å‚æ•°
      [userDefined]: true
    }
    isExact: Boolean, // å½“å‰çš„Routeæ˜¯å¦ç²¾å‡†åŒ¹é…
    path: string, // å½“å‰è¢«åŒ¹é…çš„Routeçš„ path ï¼Œå¯ä»¥åŸºäºè¿™ç‚¹å®ç°åµŒå¥—è·¯ç”±
    url: string, // urlåŒ¹é…åˆ°å½“å‰Routeçš„è·¯å¾„éƒ¨åˆ†
  }
  ```


- locationï¼Œå‡ ä¹å’ŒLinkçš„toå±æ€§å¯¹åº”ï¼Œå½“å‰è·¯ç”±è¢«åˆ‡æ¢è¿‡æ¥çš„ä¿¡æ¯
  ```javascript
  {
    key: 'ac3df4', // not with HashHistory!
    pathname: '/somewhere',
    search: '?some=search-string', // åªæœ‰è¿™é‡Œæ‰èƒ½è·å–åˆ°urlçš„searchå‚æ•°
    hash: '#howdy',
    state: { // toçš„stateä¼ è¿‡æ¥çš„æ•°æ®
      [userDefined]: true
    }
  }
  ```

## Redirect
Redirectä¸è¿‡æ˜¯ä¸€ä¸ªå¯ä»¥è‡ªåŠ¨è§¦å‘è·³è½¬çš„Linkï¼Œå’ŒLinkçš„æ ¸å¿ƒç”¨æ³•ç›¸å·®ä¸å¤§


## Hooks
- useLocation
- useParams ç›´æ¥çš„è·å–åŸæ¥çš„match.paramså¯¹è±¡
- useHistory
- useRouteMatch è·å–å’ŒåŸæ¥çš„matchå¯¹è±¡ä¸€è‡´ï¼Œåªä¸è¿‡é‡Œé¢å¯ä»¥ä¼ å…¥å‚æ•°ï¼Œå‚æ•°æ˜¯ä¸€ä¸ªRouteåŒ¹é…è§„åˆ™ï¼Œå¦‚æœèƒ½å’Œå½“å‰urlè·¯å¾„åŒ¹é…æˆåŠŸï¼Œé‚£ä¹ˆè¿”å›åŒ¹é…çš„matchï¼Œä¸èƒ½åˆ™ä¸ºNull