## Context
context有一个概念：生产者和消费者，在组件的上层生产者Provider提供context，以便Consumer消费者消费。

但是通过这类创建的
```javascript
React.createContext 创建一个context实例
Context.Provider 作为组件名 value属性，context的值为value的值
Context.Consumer 作为组件名 render props，children属性，一个函数，实参为context
```
不太直观，并且只能在JSX里访问无法在生命周期里。

因此使用
```javascript
Class.contextType
```
它可以做到将context的值挂在到对应的class上，实现方便访问

## HOC 高阶 => 低阶
> 高阶组件是参数为组件，返回值为新组件的函数

高阶组件的核心就是对传入的组件进行**增强**，通过对组件进行包裹（组件），并透传prop，并且在每个增强组件之间多了一道流程，可以做很多的事情

```javascript
// 此函数接收一个组件...
function withSubscription(WrappedComponent, selectData) {
  return class extends React.Component {
    constructor(props) {
      super(props);
      this.handleChange = this.handleChange.bind(this);
      this.state = {
        data: selectData(DataSource, props)
      };
    }

    componentDidMount() {
      // ...负责订阅相关的操作...
      DataSource.addChangeListener(this.handleChange);
    }

    componentWillUnmount() {
      DataSource.removeChangeListener(this.handleChange);
    }

    handleChange() {
      this.setState({
        data: selectData(DataSource, this.props)
      });
    }

    render() {
      // ... 并使用新数据渲染被包装的组件!
      // 请注意，我们可能还会传递其他属性
      return <WrappedComponent data={this.state.data} {...this.props} />;
    }
  };
}
```

## render props 子 => 父
> 如何将一个组件**封装的状态**或**行为共享**给其他需要相同状态的组件并不总是显而易见

```javascript
class Cat extends React.Component {
  render() {
    const mouse = this.props.mouse;
    return (
      <img src="/cat.jpg" style={{ position: 'absolute', left: mouse.x, top: mouse.y }} />
    );
  }
}


//render props的实现，就是通过回调函数，能够让上级组件能够访问到内部的数据（作为参数），进而决定渲染什么
//其实和Vue的作用域插槽相识
class Mouse extends React.Component {
  constructor(props) {
    super(props);
    this.handleMouseMove = this.handleMouseMove.bind(this);
    this.state = { x: 0, y: 0 };
  }

  handleMouseMove(event) {
    this.setState({
      x: event.clientX,
      y: event.clientY
    });
  }

  render() {
    return (
      <div onMouseMove={this.handleMouseMove}>
        {this.props.render(this.state)}
      </div>
    );
  }
}

class MouseTracker extends React.Component {
  render() {
    return (
      <div>
        <Mouse render={mouse => (
          <Cat mouse={mouse} />
        )}/>
      </div>
    );
  }
}
```